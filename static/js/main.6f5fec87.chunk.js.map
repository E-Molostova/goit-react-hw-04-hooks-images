{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Loader/Loader.module.css","Components/Button/Button.module.css","Components/Searchbar/Searchbar.module.css","services/api-service.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Searchbar/Searchbar.js","Components/Modal/Modal.js","Components/Loader/Loader.js","Components/Button/Button.js","App.js","index.js"],"names":["module","exports","fetchImages","query","currentPage","axios","get","then","res","data","ImageGalleryItem","image","openImg","className","style","onClick","largeImageURL","src","webformatURL","alt","tags","ImageGalleryItemImage","ImageGallery","gallery","map","id","Searchbar","onSubmit","useState","search","setSearch","SearchForm","e","preventDefault","type","SearchFormBtn","SearchFormBtnLabel","SearchFormInput","value","onChange","target","autoComplete","autoFocus","placeholder","modalRoot","document","querySelector","Modal","children","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","createPortal","Overlay","currentTarget","Loader","loader","color","height","width","Button","App","setGallery","page","setPage","showModal","setShowModal","showLoader","setShowLoader","error","setError","largeImage","setLargeImage","total","setTotal","hits","scrollToDown","catch","finally","prev","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","prevModal","searchQuery","message","length","Math","ceil","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6f5fec87.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1doJr\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3TwQP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3qoxy\",\"Modal\":\"Modal_Modal__1B_5B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1MXrB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__Am6Zx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2vMzO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__bIJlO\",\"SearchForm\":\"Searchbar_SearchForm__30wn5\",\"SearchFormBtn\":\"Searchbar_SearchFormBtn__3TKxp\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__13NY1\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2Psfq\",\"SearchForm-input\":\"Searchbar_SearchForm-input__xYANg\"};","import axios from 'axios';\r\n\r\nconst fetchImages = (query, currentPage) => {\r\n  const URL = 'https://pixabay.com/api/';\r\n  const KEY = '23291361-b9834d1407f849d06e39836e0';\r\n  return axios\r\n    .get(\r\n      `${URL}?q=${query}&page=${currentPage}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(res => res.data);\r\n};\r\n\r\nexport default fetchImages;\r\n\r\n// https://pixabay.com/api/?q=что_искать\r\n// & page=номер_страницы & key=твой_ключ\r\n// & image_type=photo & orientation=horizontal\r\n// & per_page=12\r\n","import React from 'react';\r\nimport style from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image, openImg }) => {\r\n  return (\r\n    <li\r\n      className={style.ImageGalleryItem}\r\n      onClick={() => {\r\n        openImg(image.largeImageURL);\r\n      }}\r\n    >\r\n      <img src={image.webformatURL} alt={image.tags} className={style.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport style from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ gallery, openImg }) => {\r\n  return (\r\n    <ul className={style.ImageGallery}>\r\n      {gallery.map(image => (\r\n        <ImageGalleryItem key={image.id} image={image} openImg={openImg} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.arrayOf(PropTypes.object),\r\n  openImg: PropTypes.func,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport style from './Searchbar.module.css';\r\n\r\nconst Searchbar = ({ onSubmit }) => {\r\n  const [search, setSearch] = useState('');\r\n\r\n  const handleInputChange = e => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    onSubmit(search);\r\n  };\r\n\r\n  return (\r\n    <header className={style.Searchbar}>\r\n      <form className={style.SearchForm} onSubmit={handleSubmit}>\r\n        <button type=\"submit\" className={style.SearchFormBtn}>\r\n          <span className={style.SearchFormBtnLabel}>Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className={style.SearchFormInput}\r\n          type=\"text\"\r\n          value={search}\r\n          onChange={handleInputChange}\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = { onSubmit: PropTypes.func };\r\n","import React, { useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport style from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nconst Modal = ({ children, onClose }) => {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  });\r\n\r\n  const handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={style.Overlay} onClick={handleBackdropClick}>\r\n      <div className={style.Modal}>{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n};\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nexport default Modal;\r\n","import style from './Loader.module.css';\r\nimport Spinner from 'react-loader-spinner';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className={style.loader}>\r\n      <Spinner type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport style from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => (\r\n  <button type=\"button\" className={style.Button} onClick={onClick}>\r\n    Load more\r\n  </button>\r\n);\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import React, { useEffect, useState } from 'react';\r\nimport fetchImages from './services/api-service';\r\nimport ImageGallery from './Components/ImageGallery/ImageGallery';\r\nimport Searchbar from './Components/Searchbar/Searchbar';\r\nimport Modal from './Components/Modal/Modal';\r\nimport Loader from './Components/Loader/Loader';\r\nimport Button from './Components/Button/Button';\r\n\r\nconst App = () => {\r\n  const [gallery, setGallery] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [showLoader, setShowLoader] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [largeImage, setLargeImage] = useState('');\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // const fetchGallery = () => {\r\n    setShowLoader(true);\r\n    fetchImages(search, 1)\r\n      .then(({ hits, total }) => {\r\n        setGallery(hits);\r\n        setPage(1);\r\n        setTotal(total);\r\n        scrollToDown();\r\n      })\r\n      .catch(error => setError(error))\r\n      .finally(() => setShowLoader(false));\r\n    // };\r\n    // fetchGallery();\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    if (page !== 1) {\r\n      setShowLoader(true);\r\n      fetchImages(search, page)\r\n        .then(({ hits, total }) => {\r\n          setGallery(prev => [...prev, ...hits]);\r\n\r\n          setTotal(total);\r\n          scrollToDown();\r\n        })\r\n        .catch(error => setError(error))\r\n        .finally(() => setShowLoader(false));\r\n    }\r\n  }, [page]);\r\n\r\n  const scrollToDown = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  const handleFormSubmit = searchQuery => {\r\n    setSearch(searchQuery);\r\n    // setGallery([]);\r\n    // setPage(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPage(prev => prev + 1);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(prevModal => !prevModal);\r\n  };\r\n\r\n  const handleOpenPicture = largeImage => {\r\n    setLargeImage(largeImage);\r\n    toggleModal();\r\n  };\r\n\r\n  const showLoadMore = () => {\r\n    return Math.ceil(total / 12) !== page - 1;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Searchbar onSubmit={handleFormSubmit} />\r\n\r\n      {error && <p>{error.message}</p>}\r\n\r\n      {gallery.length > 0 && <ImageGallery gallery={gallery} openImg={handleOpenPicture} />}\r\n\r\n      {showLoader && <Loader />}\r\n\r\n      {gallery.length > 0 && !showLoader && showLoadMore() && <Button onClick={loadMore} />}\r\n\r\n      {showModal && (\r\n        <Modal onClose={toggleModal}>\r\n          <img src={largeImage} alt={largeImage} />\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n// class App extends Component {\r\n//   state = {\r\n//     gallery: [],\r\n//     search: '',\r\n//     page: 1,\r\n//     showModal: false,\r\n//     showLoader: false,\r\n//     error: null,\r\n//     largeImage: '',\r\n//     total: 0,\r\n//   };\r\n\r\n//   fetchGallery = () => {\r\n//     const { search, page } = this.state;\r\n//     this.setState({ showLoader: true });\r\n\r\n//   fetchImages(search, page)\r\n//     .then(({ hits, total }) => {\r\n//       this.setState(prevState => ({\r\n//         gallery: [...prevState.gallery, ...hits],\r\n//         page: prevState.page + 1,\r\n//         total,\r\n//       }));\r\n//       this.scrollToDown();\r\n//     })\r\n//     .catch(error => this.setState({ error }))\r\n//     .finally(() => this.setState({ showLoader: false }));\r\n// };\r\n\r\n//   handleFormSubmit = searchQuery => {\r\n//     this.setState({ search: searchQuery, gallery: [], page: 1 });\r\n//   };\r\n\r\n//   toggleModal = () => {\r\n//     this.setState(prevState => ({\r\n//       showModal: !prevState.showModal,\r\n//     }));\r\n//   };\r\n\r\n//   handleOpenPicture = largeImage => {\r\n//     console.log(largeImage);\r\n//     this.setState({ largeImage });\r\n//     this.toggleModal();\r\n//   };\r\n\r\n//   showLoadMore = () => {\r\n//     const { total, page } = this.state;\r\n//     return Math.ceil(total / 12) !== page - 1;\r\n//   };\r\n\r\n//   componentDidMount() {\r\n//     this.setState({ showLoader: true });\r\n//     this.fetchGallery();\r\n//   }\r\n\r\n//   componentDidUpdate(prevProps, prevState) {\r\n//     const prevQuery = prevState.search;\r\n//     const nextQuery = this.state.search;\r\n//     if (prevQuery !== nextQuery) {\r\n//       this.fetchGallery();\r\n//     }\r\n\r\n//     console.log(prevQuery, nextQuery);\r\n//   }\r\n//   render() {\r\n//     const { error, showLoader, showModal, gallery, largeImage } = this.state;\r\n//     const showLoadMore = this.showLoadMore();\r\n//     return (\r\n// <div>\r\n//   <Searchbar onSubmit={this.handleFormSubmit} />\r\n\r\n//   {error && <p>{error.message}</p>}\r\n\r\n//   {gallery.length > 0 && <ImageGallery gallery={gallery} openImg={this.handleOpenPicture} />}\r\n\r\n//   {showLoader && <Loader />}\r\n\r\n//   {gallery.length > 0 && !showLoader && showLoadMore && (\r\n//     <Button onClick={this.fetchGallery} />\r\n//   )}\r\n\r\n//   {showModal && (\r\n//     <Modal onClose={this.toggleModal}>\r\n//       <img src={this.state.largeImage} alt={this.state.largeImage} />\r\n//     </Modal>\r\n//   )}\r\n// </div>\r\n//     );\r\n//   }\r\n// }\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './index.css';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}